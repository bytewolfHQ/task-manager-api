FROM node:20-alpine

WORKDIR /app

# Copy package.json if it exists, otherwise create minimal one
COPY package*.jso[n] ./
RUN if [ ! -f package.json ]; then \
        echo '{"name":"task-manager-frontend","version":"1.0.0","scripts":{"dev":"echo \"Frontend not initialized yet\""}}' > package.json; \
    fi && npm install

# Copy source code
COPY . .

# Expose port
EXPOSE 5173

# Start development server  
CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0"]
